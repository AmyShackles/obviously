<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#FFFFFF" />
        <meta name="twitter:dnt" content="on" />
        <meta
            property="og:description"
            content="A dynamic wildcard subdomain for only the BEST, made with the best intentions"
        />
        <meta
            name="description"
            content="A dynamic wildcard subdomain for only the BEST, made with the best intentions"
        />
        <meta property="og:image" content="/is/apple-touch-icon.png" />
        <meta name="twitter:card" contents="/is/apple-touch-icon.png" />
        <meta property="og:site_name" content="Obviously Best" />
        <meta property="twitter:image:alt" content="Emoji wearing sunglasses" />
        <link
            rel="apple-touch-icon"
            type="image/png"
            sizes="180x180"
            href="/is/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/is/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/is/favicon-16x16.png"
        />
        <link rel="manifest" href="/is/site.webmanifest" />
        <link rel="stylesheet" href="/is/styles.css" />

        <title></title>
    </head>
    <body>
        <header>Obviously.</header>
        <main>
            <h1 id="content"></h1>
            <p class="disclaimer">
                Think this SHOULDN'T be the best?<br /><a
                    href="https://github.com/AmyShackles/obviously/issues/new?&template=bug_report.md"
                    >Submit a bug report</a
                >
                or send me a
                <a
                    href="https://twitter.com/share?ref_src=twsrc%5Etfw"
                    class="twitter-share-button"
                    data-size="large"
                    data-text="@AmyShackles I don&#39;t think this should be the best..."
                    data-related=""
                    data-dnt="true"
                    data-show-count="false"
                    >Tweet</a
                >
            </p>

            <h2>Share this news with your friends!</h2>
            <ul>
                <li class="social-share facebook">
                    <img
                        src="/is/facebook.png"
                        srcset="
                            /is/facebook-small.png         64w,
                            /is/facebook-medium.png        80w,
                            /is/facebook-medium-large.png 120w,
                            /is/facebook-large.png        144w
                        "
                        sizes="10vh"
                        alt="Share Page on Facebook"
                    />
                </li>
                <li class="social-share twitter">
                    <img
                        src="/is/twitter.png"
                        srcset="
                            /is/twitter-small.png         78w,
                            /is/twitter-medium.png        97w,
                            /is/twitter-medium-large.png 146w,
                            /is/twitter-large.png        175w
                        "
                        sizes="10vh"
                        alt="Share Page on Twitter"
                    />
                </li>
                <li class="social-share linkedin">
                    <img
                        src="/is/linkedin.png"
                        srcset="
                            /is/linkedin-small.png         75w,
                            /is/linkedin-medium.png        94w,
                            /is/linkedin-medium-large.png 141w,
                            /is/linkedin-large.png        170w
                        "
                        sizes="10vh"
                        alt="Share Page on LinkedIn"
                    />
                </li>
            </ul>
        </main>
        <footer>
            <p>Created with love and hope by Amy Shackles</p>
        </footer>
    </body>
    <script>
        window.twttr = (function (d, s, id) {
            var js,
                fjs = d.getElementsByTagName(s)[0],
                t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
                t._e.push(f);
            };

            return t;
        })(document, "script", "twitter-wjs");
    </script>
    <script>
        function socialWindow(url) {
            const left = (screen.width - 570) / 2;
            const top = (screen.height - 570) / 2;
            const params =
                "menubar=no,toolbar=no,status=no,width=570,height=570,top=" +
                top +
                ",left=" +
                left;
            window.open(url, "NewWindow", params);
        }
        function capitalizeAndConvertHyphensToSpaces(subj) {
           let splitSubject = subj
                .split("-");
           return splitSubject
                .map((val, index) => {
                   if (val === "and") {
                      if (splitSubject.length > 2) {
                          if (index < splitSubject.length -2) {
                              return ", ";
                          }
                          return ", and";
                      } else {
                          return " and";
                      }
                   }
                   return " " + val[0].toUpperCase() + val.slice(1)
           })
                .join("");
        }
        const [subdomain, verb] = window.location.host.split(".");
        const subject = capitalizeAndConvertHyphensToSpaces(subdomain);
        document.head.getElementsByTagName(
            "title"
        )[0].innerText = `${subject} ${verb} the best`;
        document.head.innerHTML += `<meta property="og:title" content="${subject} ${verb} the best">`;
        document.getElementById(
            "content"
        ).textContent = `${subject} ${verb} OBVIOUSLY the best.`;
        document
            .querySelector(".social-share.facebook")
            .addEventListener("click", () => {
                const url = `https://www.facebook.com/sharer.php?u=${encodeURIComponent(
                    document.URL
                )}`;
                socialWindow(url);
            });
        document
            .querySelector(".social-share.twitter")
            .addEventListener("click", () => {
                const url = `https://twitter.com/intent/tweet?url=${encodeURIComponent(
                    document.URL
                )}&text=${encodeURIComponent(
                    `${subject} ${verb} OBVIOUSLY best`
                )}`;
                socialWindow(url);
            });
        document
            .querySelector(".social-share.linkedin")
            .addEventListener("click", () => {
                const url = `https://linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(
                    document.URL
                )}&title=${encodeURIComponent(
                    subject
                )}&summary=${encodeURIComponent(
                    `${subject} ${verb} OBVIOUSLY best`
                )}&source=${encodeURIComponent("Obviously.Best")}`;
                socialWindow(url);
            });
    </script>
</html>
